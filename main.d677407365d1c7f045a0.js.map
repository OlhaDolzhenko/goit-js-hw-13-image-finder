{"version":3,"sources":["webpack:///./js/images-service.js","webpack:///./js/components/load-more-btn.js","webpack:///./index.js","webpack:///./js/get-refs.js","webpack:///./templates/card-template.hbs"],"names":["ImagesApiService","selector","this","page","searchQuery","fetchImages","trim","fetch","BASE_URL","response","json","result","incrementPage","resetPage","newQuery","LoadMoreBtn","refs","getRefs","button","document","querySelector","label","enable","disabled","textContent","disable","show","classList","remove","hide","add","searchForm","gallery","loadMoreBtn","imagesApiService","showResults","images","insertAdjacentHTML","cardTmpl","hits","clearResults","innerHTML","addEventListener","e","preventDefault","query","currentTarget","elements","value","alert","then","counter","pages","y","clientHeight","window","scrollTo","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.d677407365d1c7f045a0.js","sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '20675332-a9702851f51ed62280a08ad8f';\r\n\r\nexport default class ImagesApiService {\r\n  constructor(selector) {\r\n    this.page = 1;\r\n    this.searchQuery = '';\r\n    this.selector = selector;\r\n  }\r\n\r\n  async fetchImages() {\r\n    if (this.searchQuery.trim()) {\r\n      const response = await fetch(\r\n        `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`,\r\n      );\r\n      const result = await response.json();\r\n      return result;\r\n    }\r\n    return;\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","export default class LoadMoreBtn {\r\n  constructor() {\r\n    this.refs = this.getRefs();\r\n  }\r\n\r\n  getRefs() {\r\n    const refs = {};\r\n    refs.button = document.querySelector('.load-button');\r\n    refs.label = refs.button.querySelector('.label');\r\n\r\n    return refs;\r\n  }\r\n\r\n  enable() {\r\n    this.refs.button.disabled = false;\r\n    this.refs.label.textContent = 'Load more';\r\n  }\r\n\r\n  disable() {\r\n    this.refs.button.disabled = true;\r\n    this.refs.label.textContent = 'Loading...';\r\n  }\r\n\r\n  show() {\r\n    this.refs.button.classList.remove('is-hidden');\r\n  }\r\n\r\n  hide() {\r\n    this.refs.button.classList.add('is-hidden');\r\n  }\r\n}\r\n","import './styles.css';\nimport cardTmpl from './templates/card-template.hbs';\nimport ImagesApiService from './js/images-service';\nimport getRefs from './js/get-refs';\nimport LoadMoreBtn from './js/components/load-more-btn';\n\nconst refs = getRefs();\n\nconst loadMoreBtn = new LoadMoreBtn();\nconst imagesApiService = new ImagesApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nloadMoreBtn.refs.button.addEventListener('click', loadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  imagesApiService.query = e.currentTarget.elements.query.value;\n\n  if (imagesApiService.query.trim() === '') {\n    clearResults();\n    loadMoreBtn.hide();\n    return alert('❗Incorrect request❗');\n  } else {\n    loadMoreBtn.show();\n    imagesApiService.resetPage();\n    clearResults();\n    fetchImages();\n  }\n}\n\nfunction fetchImages() {\n  loadMoreBtn.disable();\n  imagesApiService.fetchImages().then(images => {\n    showResults(images);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction showResults(images) {\n  imagesApiService.incrementPage();\n  refs.gallery.insertAdjacentHTML('beforeend', cardTmpl(images.hits));\n}\n\nfunction clearResults() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction loadMore() {\n  loadMoreBtn.disable();\n  const counter = imagesApiService.page;\n  imagesApiService\n    .fetchImages()\n    .then(images => {\n      showResults(images);\n      loadMoreBtn.enable();\n    })\n    .then(() => windowScroll(counter));\n}\n\nfunction windowScroll(pages) {\n  const y =\n    (refs.gallery.clientHeight / pages) * (pages - 1) -\n    document.querySelector('.header').clientHeight;\n  window.scrollTo(0, y);\n}\n","export default function getRefs() {\r\n  return {\r\n    searchForm: document.querySelector('.search-form'),\r\n    gallery: document.querySelector('.gallery-list'),\r\n  };\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":14},\"end\":{\"line\":3,\"column\":30}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":18},\"end\":{\"line\":8,\"column\":27}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":18},\"end\":{\"line\":12,\"column\":27}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":18},\"end\":{\"line\":16,\"column\":30}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":18},\"end\":{\"line\":20,\"column\":31}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}